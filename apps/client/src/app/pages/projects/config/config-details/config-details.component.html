<div class="config" *subscribe="searchControl.value$; let searchText;">

    <h1>Config Entries</h1>
    <div class="list-controls">
        <input class="input invert" [formControl]="searchControl" placeholder="Type to search..."
               autofocus>
    </div>

    <table *ngIf="config$ | async as config; else loadingConfig" class="table">
        <thead>
        <tr>
            <th></th>
            <th style="width: 30%;">KEY</th>
            <th style="width: 30%;">VALUE</th>
            <th>Edit</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let entry of config.entries | catFilter: searchText :  ['key', 'value']">
            <td></td>
            <td class="editable">
                <cat-editable (edit)="entryEdited($event, entry , 'key')">
                    <ng-template viewMode>
                        <div class="edit-value" catHighlight [searchedWord]="searchText" [content]="entry.key"
                             [classToApply]="'search-highlight'" [setTitle]="true">
                            {{entry.key}}
                        </div>
                    </ng-template>
                    <ng-template editMode>
                        <input #editInput
                               class="edit-input input invert small edgey"
                               [value]="entry.key"
                               (change)="entry.key"/>
                    </ng-template>
                </cat-editable>
            </td>

            <td class="editable">
                <cat-editable (edit)="entryEdited($event, entry, 'value')">
                    <ng-template viewMode>
                        <div class="edit-value" catHighlight [searchedWord]="searchText" [content]="entry.value"
                             [classToApply]="'search-highlight'" [setTitle]="true">
                            {{entry.value}}
                        </div>
                    </ng-template>
                    <ng-template editMode>
                        <input #editInput
                               class="edit-input input invert small edgey"
                               [value]="entry.value"
                               (change)="entry.value"/>
                    </ng-template>
                </cat-editable>
            </td>
            <td>

            </td>
        </tr>
        </tbody>
    </table>

    <ng-template #loadingConfig>
        <div>Loading Configuration entries...</div>
    </ng-template>
</div>
